<!DOCTYPE html>  <html> <head>   <title>command.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="command.html">                 command.coffee               </a>                                           <a class="source" href="md.html">                 md.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               command.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><a href="http://neocotic.com/html.md">html.md</a> <br />
(c) 2013 Alasdair Mercer <br />
Freely distributable under the MIT license. <br />
Based on <a href="http://homepage.mac.com/tjim/">Make.text</a> 1.5 <br />
(c) 2007 Trevor Jim <br />
For all details and documentation: <br />
<a href="http://neocotic.com/html.md">http://neocotic.com/html.md</a></p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Module dependencies</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">fs             = </span><span class="nx">require</span> <span class="s">&#39;fs-extra&#39;</span>
<span class="nv">md             = </span><span class="nx">require</span> <span class="s">&#39;./md&#39;</span>
<span class="nv">glob           = </span><span class="nx">require</span><span class="p">(</span><span class="s">&#39;glob&#39;</span><span class="p">).</span><span class="nx">sync</span>
<span class="nv">path           = </span><span class="nx">require</span> <span class="s">&#39;path&#39;</span>
<span class="p">{</span><span class="nx">OptionParser</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span> <span class="s">&#39;optparse&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h2>Private constants</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Error code used when a file/directory could not be found.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">NOT_FOUND  = </span><span class="s">&#39;ENOENT&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Regular expression used to identify HTML files using common extensions.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">R_HTML_EXT = </span><span class="sr">/\.s?html?$/i</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Available options/switches.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">SWITCHES   = </span><span class="p">[</span>
  <span class="p">[</span><span class="s">&#39;-a&#39;</span><span class="p">,</span> <span class="s">&#39;--absolute&#39;</span><span class="p">,</span>   <span class="s">&#39;always use absolute URLs for links&#39;</span><span class="p">]</span>
  <span class="p">[</span><span class="s">&#39;-d&#39;</span><span class="p">,</span> <span class="s">&#39;--debug&#39;</span><span class="p">,</span>      <span class="s">&#39;print additional debug information&#39;</span><span class="p">]</span>
  <span class="p">[</span><span class="s">&#39;-e&#39;</span><span class="p">,</span> <span class="s">&#39;--eval&#39;</span><span class="p">,</span>       <span class="s">&#39;pass a string from the command line as input&#39;</span><span class="p">]</span>
  <span class="p">[</span><span class="s">&#39;-h&#39;</span><span class="p">,</span> <span class="s">&#39;--help&#39;</span><span class="p">,</span>       <span class="s">&#39;display this help information&#39;</span><span class="p">]</span>
  <span class="p">[</span><span class="s">&#39;-l&#39;</span><span class="p">,</span> <span class="s">&#39;--long-ext&#39;</span><span class="p">,</span>   <span class="s">&#39;use long extension for Markdown files&#39;</span><span class="p">]</span>
  <span class="p">[</span><span class="s">&#39;-o&#39;</span><span class="p">,</span> <span class="s">&#39;--output DIR&#39;</span><span class="p">,</span> <span class="s">&#39;set the output directory for converted Markdown&#39;</span><span class="p">]</span>
  <span class="p">[</span><span class="s">&#39;-p&#39;</span><span class="p">,</span> <span class="s">&#39;--print&#39;</span><span class="p">,</span>      <span class="s">&#39;print out the converted Markdown&#39;</span><span class="p">]</span>
  <span class="p">[</span><span class="s">&#39;-v&#39;</span><span class="p">,</span> <span class="s">&#39;--version&#39;</span><span class="p">,</span>    <span class="s">&#39;display the version number&#39;</span><span class="p">]</span>
<span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h2>Private variables</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>File extension to be applied to any Markdown files created.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">extension = </span><span class="s">&#39;.md&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Options, including their defaults, possibly changed by flags passed in at runtime.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">opts      =</span>
  <span class="nv">absolute: </span><span class="kc">no</span>
  <span class="nv">debug: </span>   <span class="kc">no</span>
  <span class="nb">eval</span><span class="o">:</span>     <span class="kc">no</span>
  <span class="nv">longExt: </span> <span class="kc">no</span>
  <span class="nv">output: </span>  <span class="kc">null</span>
  <span class="nv">print: </span>   <span class="kc">no</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>List of HTML sources passed in at runtime. <br />
These can either be paths or a single HTML input (if <code>eval</code> option was enabled).</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">sources   = </span><span class="p">[]</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h2>Private functions</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Exit the process <em>gracefully</em>, optionally displaying <code>message</code> before doing so.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">exit = </span><span class="nf">(code, message) -&gt;</span>
  <span class="k">if</span> <span class="k">typeof</span> <span class="nx">code</span> <span class="o">is</span> <span class="s">&#39;string&#39;</span>
    <span class="nv">message = </span><span class="nx">code</span>
    <span class="nv">code    = </span><span class="kc">null</span>

  <span class="nx">code</span> <span class="o">?=</span> <span class="mi">0</span>

  <span class="nx">console</span><span class="p">[</span><span class="k">if</span> <span class="nx">code</span> <span class="k">then</span> <span class="s">&#39;error&#39;</span> <span class="k">else</span> <span class="s">&#39;log&#39;</span><span class="p">]</span> <span class="nx">message</span> <span class="k">if</span> <span class="nx">message</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="nx">code</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Resolve the output path for <code>source</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">outputPath = </span><span class="nf">(source, base) -&gt;</span>
  <span class="nv">fileName = </span><span class="nx">path</span><span class="p">.</span><span class="nx">basename</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">path</span><span class="p">.</span><span class="nx">extname</span><span class="p">(</span><span class="nx">source</span><span class="p">))</span> <span class="o">+</span> <span class="nx">extension</span>
  <span class="nv">srcDir   = </span><span class="nx">path</span><span class="p">.</span><span class="nx">dirname</span> <span class="nx">source</span>
  <span class="nv">dir      = </span><span class="k">if</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">output</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">join</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">output</span><span class="p">,</span> <span class="k">if</span> <span class="nx">base</span> <span class="o">is</span> <span class="s">&#39;.&#39;</span> <span class="k">then</span> <span class="nx">srcDir</span> <span class="k">else</span> <span class="nx">srcDir</span><span class="p">[</span><span class="nx">base</span><span class="p">.</span><span class="nx">length</span><span class="p">..]</span>
  <span class="k">else</span>
    <span class="nx">srcDir</span>

  <span class="nx">path</span><span class="p">.</span><span class="nx">join</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">fileName</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Attempt to either parse the contents of path or, if it's a directory, the contents of its
children HTML files.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">parsePath = </span><span class="nf">(source, topLevel, base) -&gt;</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">stat</span> <span class="nx">source</span><span class="p">,</span> <span class="nf">(err, stats) -&gt;</span>
    <span class="k">throw</span> <span class="nx">err</span> <span class="k">if</span> <span class="nx">err</span> <span class="o">and</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span> <span class="o">isnt</span> <span class="nx">NOT_FOUND</span>

    <span class="k">if</span> <span class="nx">err</span><span class="o">?</span><span class="p">.</span><span class="nx">code</span> <span class="o">is</span> <span class="nx">NOT_FOUND</span>
      <span class="k">if</span> <span class="nx">topLevel</span> <span class="o">and</span> <span class="o">not</span> <span class="nx">R_HTML_EXT</span><span class="p">.</span><span class="nx">test</span> <span class="nx">source</span>
        <span class="nv">source = </span><span class="nx">sources</span><span class="p">[</span><span class="nx">sources</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">source</span><span class="p">)]</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">#{</span><span class="nx">source</span><span class="si">}</span><span class="s">.html&quot;</span>
        <span class="nx">parsePath</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">topLevel</span><span class="p">,</span> <span class="nx">base</span>
      <span class="k">else</span> <span class="k">if</span> <span class="nx">topLevel</span>
        <span class="nx">exit</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;File not found: </span><span class="si">#{</span><span class="nx">source</span><span class="si">}</span><span class="s">&quot;</span>
      <span class="k">return</span>

    <span class="k">if</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">isDirectory</span><span class="p">()</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">readdir</span> <span class="nx">source</span><span class="p">,</span> <span class="nf">(err, files) -&gt;</span>
        <span class="k">throw</span> <span class="nx">err</span> <span class="k">if</span> <span class="nx">err</span> <span class="o">and</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span> <span class="o">isnt</span> <span class="nx">NOT_FOUND</span>
        <span class="k">return</span> <span class="k">if</span> <span class="nx">err</span><span class="o">?</span><span class="p">.</span><span class="nx">code</span> <span class="o">is</span> <span class="nx">NOT_FOUND</span>

        <span class="nv">index = </span><span class="nx">sources</span><span class="p">.</span><span class="nx">indexOf</span> <span class="nx">source</span>
        <span class="nx">sources</span><span class="p">[</span><span class="nx">index</span><span class="p">..</span><span class="nx">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">file</span> <span class="k">for</span> <span class="nx">file</span> <span class="k">in</span> <span class="nx">files</span><span class="p">)</span>

        <span class="nx">files</span><span class="p">.</span><span class="nx">forEach</span> <span class="nf">(file) -&gt;</span>
          <span class="nx">parsePath</span> <span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">file</span><span class="p">),</span> <span class="kc">no</span><span class="p">,</span> <span class="nx">base</span>
    <span class="k">else</span> <span class="k">if</span> <span class="nx">topLevel</span> <span class="o">or</span> <span class="nx">R_HTML_EXT</span><span class="p">.</span><span class="nx">test</span> <span class="nx">source</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span> <span class="nx">source</span><span class="p">,</span> <span class="nf">(err, html) -&gt;</span>
        <span class="k">throw</span> <span class="nx">err</span> <span class="k">if</span> <span class="nx">err</span> <span class="o">and</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span> <span class="o">isnt</span> <span class="nx">NOT_FOUND</span>
        <span class="k">return</span> <span class="k">if</span> <span class="nx">err</span><span class="o">?</span><span class="p">.</span><span class="nx">code</span> <span class="o">is</span> <span class="nx">NOT_FOUND</span>

        <span class="nx">parseHtml</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">html</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="nx">base</span>
    <span class="k">else</span>
      <span class="nx">sources</span><span class="p">.</span><span class="nx">splice</span> <span class="nx">sources</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">source</span><span class="p">),</span> <span class="mi">1</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Parse <code>input</code> and write it to a Markdown file, where appropriate.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">parseHtml = </span><span class="nf">(file, input, base) -&gt;</span>
  <span class="k">try</span>
    <span class="nv">output = </span><span class="nx">md</span> <span class="nx">input</span><span class="p">,</span> <span class="nx">opts</span>

    <span class="k">if</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">print</span> <span class="k">then</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">output</span>
    <span class="k">else</span> <span class="k">if</span> <span class="nx">file</span>  <span class="k">then</span> <span class="nx">writeMarkdown</span> <span class="nx">file</span><span class="p">,</span> <span class="nx">output</span><span class="p">,</span> <span class="nx">base</span>
  <span class="k">catch</span> <span class="nx">err</span>
    <span class="nx">exit</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">err</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Parse the options provided at runtime.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">parseOptions = </span><span class="o">-&gt;</span>
  <span class="nv">parser = </span><span class="k">new</span> <span class="nx">OptionParser</span> <span class="nx">SWITCHES</span>
  <span class="nv">parser.banner        = </span><span class="s">&#39;Usage: md [options] [ -e html | file.html ] [arguments]&#39;</span>
  <span class="nv">parser.options_title = </span><span class="s">&#39;Options:&#39;</span>

  <span class="nv">toCamelCase = </span><span class="nf">(str) -&gt;</span>
    <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span> <span class="sr">/-([a-z])/gi</span><span class="p">,</span> <span class="nf">(match, char) -&gt;</span>
      <span class="nx">char</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span>

  <span class="nx">parser</span><span class="p">.</span><span class="kc">on</span> <span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="nf">(opt, val) -&gt;</span>
    <span class="nv">opt = </span><span class="nx">toCamelCase</span> <span class="nx">opt</span>

    <span class="k">if</span> <span class="k">typeof</span> <span class="nx">opts</span><span class="p">[</span><span class="nx">opt</span><span class="p">]</span> <span class="o">is</span> <span class="s">&#39;boolean&#39;</span> <span class="k">then</span> <span class="nx">opts</span><span class="p">[</span><span class="nx">opt</span><span class="p">]</span> <span class="o">=</span> <span class="o">not</span> <span class="nx">opts</span><span class="p">[</span><span class="nx">opt</span><span class="p">]</span>
    <span class="k">else</span> <span class="k">if</span> <span class="nx">val</span><span class="o">?</span>                     <span class="k">then</span> <span class="nx">opts</span><span class="p">[</span><span class="nx">opt</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span>

  <span class="nx">parser</span><span class="p">.</span><span class="kc">on</span> <span class="s">&#39;help&#39;</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="nx">exit</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>

  <span class="nx">parser</span><span class="p">.</span><span class="kc">on</span> <span class="s">&#39;version&#39;</span><span class="p">,</span> <span class="o">-&gt;</span>
    <span class="nx">exit</span> <span class="s">&quot;html.md version </span><span class="si">#{</span><span class="nx">md</span><span class="p">.</span><span class="nx">VERSION</span><span class="si">}</span><span class="s">&quot;</span>

  <span class="nv">extension = </span><span class="s">&#39;.markdown&#39;</span> <span class="k">if</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">longExt</span>

  <span class="nv">pattern = </span><span class="nx">parser</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">)[</span><span class="mi">2</span><span class="p">..].</span><span class="nx">join</span> <span class="s">&#39; &#39;</span>
  <span class="k">if</span> <span class="nx">pattern</span>
    <span class="nv">sources = </span><span class="nx">glob</span> <span class="nx">pattern</span><span class="p">,</span> <span class="nv">nosort: </span><span class="kc">on</span>
  <span class="k">else</span>
    <span class="nx">exit</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Write the <code>markdown</code> converted from <code>source</code> to its relative output file.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">writeMarkdown = </span><span class="nf">(source, markdown, base) -&gt;</span>
  <span class="nv">mdPath = </span><span class="nx">outputPath</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">base</span>
  <span class="nv">mdDir  = </span><span class="nx">path</span><span class="p">.</span><span class="nx">dirname</span> <span class="nx">mdPath</span>

  <span class="nv">parse = </span><span class="nf">(err) -&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span> <span class="nx">err</span> <span class="k">if</span> <span class="nx">err</span>

    <span class="nv">markdown = </span><span class="s">&#39; &#39;</span> <span class="k">if</span> <span class="nx">markdown</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">writeFile</span> <span class="nx">mdPath</span><span class="p">,</span> <span class="nx">markdown</span><span class="p">,</span> <span class="nf">(err) -&gt;</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span> <span class="nx">err</span> <span class="k">if</span> <span class="nx">err</span>

  <span class="nx">fs</span><span class="p">.</span><span class="nx">exists</span> <span class="nx">mdDir</span><span class="p">,</span> <span class="nf">(exists) -&gt;</span>
    <span class="k">if</span> <span class="nx">exists</span> <span class="k">then</span> <span class="nx">do</span> <span class="nx">parse</span> <span class="k">else</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">mkdirs</span> <span class="nx">mdDir</span><span class="p">,</span> <span class="nx">parse</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <h2>Public API</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Handle the runtime arguments accordingly.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">exports.run = </span><span class="o">-&gt;</span>
  <span class="nx">unless</span> <span class="nx">process</span><span class="p">.</span><span class="nx">platform</span> <span class="o">is</span> <span class="s">&#39;win32&#39;</span>
    <span class="nx">process</span><span class="p">.</span><span class="kc">on</span> <span class="s">&#39;SIGTERM&#39;</span><span class="p">,</span> <span class="o">-&gt;</span>
      <span class="nx">do</span> <span class="nx">exit</span>

  <span class="k">try</span>
    <span class="nx">do</span> <span class="nx">parseOptions</span>

    <span class="k">return</span> <span class="nx">parseHtml</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">sources</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">opts</span> <span class="k">if</span> <span class="nx">opts</span><span class="p">.</span><span class="nb">eval</span>

    <span class="nx">parsePath</span> <span class="nx">source</span><span class="p">,</span> <span class="kc">yes</span><span class="p">,</span> <span class="nx">path</span><span class="p">.</span><span class="nx">normalize</span> <span class="nx">source</span> <span class="k">for</span> <span class="nx">source</span> <span class="k">in</span> <span class="nx">sources</span>
  <span class="k">catch</span> <span class="nx">err</span>
    <span class="nx">exit</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">err</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 